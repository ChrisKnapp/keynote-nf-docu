
Changes in 1.8.0 Beta 4  (02/09/2023)
=======================

* Fixed: KNT Files where displaying RTF content as txt in systems with locale codepage set to UTF8 (65001)

  See the problem described here: https://github.com/dpradov/keynote-nf/issues/602#issuecomment-1688644599

  Note. To change that setting in W10:
   Settings -> From Time & Language, select Region.
   Under Related Settings, select Additional date, time, & regional settings.
   Select Region to change location.
   On the Administrative tab, click Change system locale....
   Check (or uncheck) "Use Unicode UTF-8 for worldwide language support"
   Restart the system.

  (As of Windows 10 1803, Microsoft added the ability to specify UTF-8 as the character encoding used by Windows itself)
  (Appears as beta in Windows 10)

* Fixed: Certain RTF insertions were interpreted as text plain in RichEdit version <= 4

  See https://github.com/dpradov/keynote-nf/issues/602#issuecomment-1688868732
  (problem with old RichEdit versions -- W7 )

- - - - - 

* Improved Alarm management window. Revised design and usability

- - - - - 

* Fixed: Indentation of multiple lines done pressing TAB was not working

- - - - - 

* Improvements in internal KNT links

 - Fixed: A previously inserted hidden marker might not be reused in all situations 
        (in that case, new hidden markers could be inserted at the same position)

 - New: If we are marking (CTR+F6) the start of a node or note (CaretPos = 0), no hidden marker
        will be created. Link created after will always aim for that position 0.

 - New: Hint in status bar now shows the number of the new hidden mark created, as a reference.
        It also remember us that we can use Undo to delete a new hidden mark (created by error)

 - New: Another hint in status bar shows the number of the hidden mark we are pointing it (if any)

  ( Note: hidden mark numbers start by 1 and are specific to each node )


- - - - - 

* Fixed: Option "Autoregister file type" now works ok without any special permissions

  Now it is registered for current user, in HKEY_CURRENT_USER. Registered types: .knt, .kne, .knm, .knl
 (HKEY_LOCAL_MACHINE / HKEY_CLASSES_ROOT:
  On the newest Windows versions, you need admin rights to register a file type for all the machine users)

* Fixed: Option "Use system default web browser" was not working 

* Fixes and changes in URL actions:
  - Fixed: 'Open in New window' didn't open URL in a new window (worked equal to 'Open')
  - CTRL+Click: Now it is associated to Open (not to Open in new window as before --although not worked as such)
  - Removed option (in Actions | URL actions ) "Shift key must be held down when URL is clicked"
     (It didn't work. URL Click is not raised when Shift is down)

- - - - - 

* Other fixes and improvements:

  * Fixed: Exception in Find All adding matching result in standard note (without tree)
    Also, it is controlled the exception that could generate a malformed RTF content
  
  * Optimization when removing KNT hidden characters

  * Fixed: buffer size for TRxCustomRichEdit.TextPlain could truncate one character on certain situations

  * Changed the way RTFAux control is created and used / Several fixes related to removing of hidden knt chars
    Mainly to avoid the chance of interference between initial process used to load TextPlainVariables (on second plane)
    and other tasks that used the control RTFAux, created as global and instanced with lazy load.

  * Minor corrections in management of knt hidden characters (used with internal KNT links)

